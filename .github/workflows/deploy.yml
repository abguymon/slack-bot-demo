name: Deploy to Staging

on:
  workflow_dispatch:
    inputs:
      imageTag:
        description: 'Docker image tag to deploy'
        required: true
        type: string

jobs:
  deploy:
    runs-on: ubuntu-latest
    
    steps:
    - name: Checkout code
      uses: actions/checkout@v4
      
    - name: Display deployment info
      run: |
        echo "ðŸš€ Starting deployment..."
        echo "Image Tag: ${{ github.event.inputs.imageTag }}"
        echo "Branch: ${{ github.ref_name }}"
        echo "Repository: ${{ github.repository }}"
        
    - name: Simulate deployment
      run: |
        echo "ðŸ“¦ Deploying image: ${{ github.event.inputs.imageTag }}"
        echo "ðŸŽ¯ Target environment: staging"
        echo "â±ï¸  Simulating deployment process..."
        sleep 5
        echo "âœ… Deployment completed successfully!"
        
    - name: Create deployment summary
      run: |
        echo "## Deployment Summary" >> $GITHUB_STEP_SUMMARY
        echo "- **Image Tag:** ${{ github.event.inputs.imageTag }}" >> $GITHUB_STEP_SUMMARY
        echo "- **Environment:** Staging" >> $GITHUB_STEP_SUMMARY
        echo "- **Status:** âœ… Success" >> $GITHUB_STEP_SUMMARY
        echo "- **Deployed at:** $(date)" >> $GITHUB_STEP_SUMMARY 